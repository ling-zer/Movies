"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[147],{3150:function(e,a,n){n.d(a,{Z:function(){return q}});var r=n(1413),t=(n(5819),n(7309)),i=(n(4155),n(5581)),l=(n(487),n(2014)),s=(n(65),n(6675)),u=(n(8308),n(8678)),o=n(4165),c=(n(224),n(3695)),p=n(5861),f=n(5671),d=n(3144),m=n(9340),h=n(8557),v=n(2791),Z=(n(8575),n(1740),n(8452)),b=(n(978),n(9553)),x=n(9439),j=n(9286),g=n(184),y=function(e){var a=(0,v.useState)(!1),n=(0,x.Z)(a,2),r=n[0],t=n[1],i=e.value?[{uid:e.value,name:e.value,url:e.value}]:[];return(0,g.jsxs)("div",{children:[(0,g.jsx)(b.Z,{action:"/api/upload",listType:"picture-card",name:"imgfile",accept:".jpg,.png,.gif,.jiff",fileList:i,customRequest:function(a){!function(e,a){w.apply(this,arguments)}(a,e)},onRemove:function(){e.onChange&&e.onChange("")},onPreview:function(){t(!0)},children:e.value?null:(0,g.jsxs)("div",{children:[(0,g.jsx)(j.Z,{}),(0,g.jsx)("div",{style:{marginTop:8},children:"Upload"})]})}),(0,g.jsx)(Z.Z,{visible:r,footer:null,onCancel:function(){t(!1)},children:(0,g.jsx)("img",{src:e.value,alt:"",style:{width:"100%"}})})]})};function w(){return(w=(0,p.Z)((0,o.Z)().mark((function e(a,n){var r,t,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append(a.filename,a.file),t=new Request(a.action,{method:"post",body:r}),e.next=5,fetch(t).then((function(e){return e.json()}));case 5:(i=e.sent).err?c.ZP.error("\u4e0a\u4f20\u5931\u8d25\uff01".concat(i.err)):n.onChange&&n.onChange(i.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=n(6871),k=[{label:"\u4e2d\u56fd\u5927\u9646",value:"\u4e2d\u56fd\u5927\u9646"},{label:"\u4e2d\u56fd\u9999\u6e2f",value:"\u4e2d\u56fd\u9999\u6e2f"},{label:"\u4e2d\u56fd\u53f0\u6e7e",value:"\u4e2d\u56fd\u53f0\u6e7e"},{label:"\u7f8e\u56fd",value:"\u7f8e\u56fd"},{label:"\u65e5\u672c",value:"\u65e5\u672c"}],I=[{label:"\u559c\u5267",value:"\u559c\u5267"},{label:"\u52a8\u4f5c",value:"\u52a8\u4f5c"},{label:"\u707e\u96be",value:"\u707e\u96be"},{label:"\u7231\u60c5",value:"\u7231\u60c5"},{label:"\u79d1\u5e7b",value:"\u79d1\u5e7b"}],P=function(e){(0,m.Z)(n,e);var a=(0,h.Z)(n);function n(){return(0,f.Z)(this,n),a.apply(this,arguments)}return(0,d.Z)(n,[{key:"finished",value:function(){var e=(0,p.Z)((0,o.Z)().mark((function e(a){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onSubmit(a);case 2:(n=e.sent)?c.ZP.error(n):(c.ZP.success("\u5904\u7406\u6210\u529f"),this.props.navigate&&this.props.navigate(-1));case 4:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return(0,g.jsxs)(s.Z,{name:"basic",labelCol:{span:4},wrapperCol:{span:8},autoComplete:"off",onFinish:this.finished.bind(this),ref:this.props.ref1,children:[(0,g.jsx)(s.Z.Item,{label:"\u7535\u5f71\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u7535\u5f71\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"}],children:(0,g.jsx)(u.Z,{"aria-placeholder":"movie name"})}),(0,g.jsx)(s.Z.Item,{"aria-label":"move type",label:"\u7535\u5f71\u7c7b\u578b",name:"types",wrapperCol:{offset:0,span:16},rules:[{required:!0,message:"\u7535\u5f71\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,g.jsx)(l.Z.Group,{options:I})}),(0,g.jsx)(s.Z.Item,{label:"\u4e0a\u6620\u5730\u533a",name:"area",wrapperCol:{offset:0,span:16},rules:[{required:!0,message:"\u4e0a\u6620\u5730\u533a\u4e0d\u80fd\u4e3a\u7a7a!"}],"aria-label":"showing area",children:(0,g.jsx)(l.Z.Group,{options:k})}),(0,g.jsx)(s.Z.Item,{label:"\u65f6\u957f (\u5206\u949f)","aria-label":"duration",name:"timeLong",rules:[{required:!0,message:"\u65f6\u957f\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^([1-9]\d{0,2})$/,message:"\u65f6\u957f\u5fc5\u987b\u57281~999\u4e4b\u95f4"}],children:(0,g.jsx)(u.Z,{type:"number",min:1,max:999,"aria-placeholder":"duration"})}),(0,g.jsx)(s.Z.Item,{label:"\u6b63\u5728\u70ed\u6620","aria-label":"is hot",name:"isHot",initialValue:!1,valuePropName:"checked",children:(0,g.jsx)(i.Z,{})}),(0,g.jsx)(s.Z.Item,{label:"\u5373\u5c06\u4e0a\u6620","aria-label":"coming soon",name:"isComing",initialValue:!1,valuePropName:"checked",children:(0,g.jsx)(i.Z,{})}),(0,g.jsx)(s.Z.Item,{label:"\u7ecf\u5178\u5f71\u7247","aria-label":"is classic",name:"isClassic",initialValue:!1,valuePropName:"checked",children:(0,g.jsx)(i.Z,{})}),(0,g.jsx)(s.Z.Item,{label:"\u7535\u5f71\u63cf\u8ff0","aria-label":"description",name:"description",children:(0,g.jsx)(u.Z.TextArea,{"aria-placeholder":"movie description"})}),(0,g.jsx)(s.Z.Item,{label:"\u6d77\u62a5","aria-label":"poster",name:"poster",children:(0,g.jsx)(y,{})}),(0,g.jsxs)(s.Z.Item,{wrapperCol:{offset:8,span:16},children:[(0,g.jsx)(t.Z,{type:"primary",htmlType:"submit","aria-label":"submit",children:"\u63d0\u4ea4"}),(0,g.jsx)(t.Z,{htmlType:"button","aria-label":"return",onClick:function(){e.props.navigate&&e.props.navigate(-1)},style:{marginLeft:50},children:"\u8fd4\u56de"})]})]})}}]),n}(v.Component),q=v.forwardRef((function(e,a){return(0,g.jsx)(P,(0,r.Z)((0,r.Z)({},e),{},{ref1:a,navigate:(0,C.s0)()}))}))},8147:function(e,a,n){n.r(a);var r=n(4165),t=n(5861),i=n(2791),l=n(6871),s=n(3150),u=n(4474),o=n(184);a.default=function(){var e=(0,l.UO)().id,a=(0,i.useRef)(null);return(0,i.useEffect)((function(){var n=function(){var a=(0,t.Z)((0,r.Z)().mark((function a(){return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.u.getMovieById(e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();n().then((function(e){if(null!==e&&void 0!==e&&e.data){var n=a.current;null===n||void 0===n||n.setFieldsValue(e.data)}}))}),[e]),(0,o.jsx)(s.Z,{ref:a,onSubmit:function(){var a=(0,t.Z)((0,r.Z)().mark((function a(n){var t;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.u.edit(e,n);case 2:if(!(t=a.sent).data){a.next=7;break}return a.abrupt("return","");case 7:return a.abrupt("return",t.err);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()})}}}]);
//# sourceMappingURL=147.1b4373bb.chunk.js.map