"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[313],{1565:function(n,e,t){t.r(e),t.d(e,{default:function(){return L}});var i,r=t(4165),o=t(5861),a=t(1413),s=(t(4188),t(2587)),c=(t(446),t(3789)),u=(t(224),t(3695)),l=(t(4155),t(5581)),d=(t(965),t(3099)),p=(t(5819),t(7309)),h=(t(8308),t(8678)),f=t(5671),g=t(3144),C=t(9340),m=t(8557),x=t(2791),y=t.p+"static/media/default.9a377eb3e06cc144a024.jpg";!function(n){n.isHot="isHot",n.isComing="isComing",n.isClassic="isClassic"}(i||(i={}));var Z,v=t(6871),k=t(1730),j=t(184),w=function(n){(0,C.Z)(t,n);var e=(0,m.Z)(t);function t(){return(0,f.Z)(this,t),e.apply(this,arguments)}return(0,g.Z)(t,[{key:"componentDidMount",value:function(){this.props.onLoad&&this.props.onLoad()}},{key:"getFilterDrowpdown",value:function(n){var e=this;return(0,j.jsxs)("div",{style:{padding:8},children:[(0,j.jsx)(h.Z,{style:{marginBottom:8,display:"block"},value:this.props.condition.key,onChange:function(n){return e.props.onKeyChange(n.target.value)},onPressEnter:this.props.onSearch}),(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(p.Z,{type:"primary",icon:(0,j.jsx)(k.Z,{}),size:"small",style:{width:90},onClick:this.props.onSearch,children:"\u641c\u7d22"}),(0,j.jsx)(p.Z,{size:"small",style:{width:90},onClick:function(){e.props.onKeyChange(""),e.props.onSearch()},children:"\u91cd\u7f6e"})]})]})}},{key:"getCloums",value:function(){var n=this;return[{title:"\u6d77\u62a5",dataIndex:"poster",render:function(n){return n?(0,j.jsx)("img",{className:"tablePoster",src:n,alt:""}):(0,j.jsx)("img",{className:"tablePoster",src:y,alt:""})}},{title:"\u540d\u79f0",dataIndex:"name",filterDropdown:this.getFilterDrowpdown.bind(this),filterIcon:(0,j.jsx)(k.Z,{})},{title:"\u5730\u533a",dataIndex:"area",render:function(n){return n.join(" , ")}},{title:"\u7c7b\u578b",dataIndex:"types",render:function(n){return n.join(" , ")}},{title:"\u65f6\u957f",dataIndex:"timeLong",render:function(n){return n+"\u5206\u949f"},sorter:function(n,e){return n.timeLong-e.timeLong}},{title:"\u6b63\u5728\u70ed\u6620",dataIndex:"isHot",render:function(e,t){return(0,j.jsx)(l.Z,{defaultChecked:e,onChange:function(e){n.props.onSwitchChange(i.isHot,e,t._id)}})}},{title:"\u5373\u5c06\u4e0a\u6620",dataIndex:"isComing",render:function(e,t){return(0,j.jsx)(l.Z,{defaultChecked:e,onChange:function(e){n.props.onSwitchChange(i.isComing,e,t._id)}})}},{title:"\u7ecf\u5178\u5f71\u7247",dataIndex:"isClassic",render:function(e,t){return(0,j.jsx)(l.Z,{defaultChecked:e,onChange:function(e){n.props.onSwitchChange(i.isClassic,e,t._id)}})}},{title:"\u64cd\u4f5c",dataIndex:"_id",render:function(e,t){return(0,j.jsxs)("div",{children:[(0,j.jsx)(p.Z,{"aria-label":"edit",type:"primary",size:"small",onClick:function(){n.props.navigate("/movie/edit/".concat(e))},children:"\u7f16\u8f91"}),(0,j.jsx)(c.Z,{title:"\u786e\u8ba4\u5220\u9664\u8be5\u6761\u6570\u636e\u5417?",onConfirm:(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.props.onDelete(e);case 2:u.ZP.success("\u5220\u9664\u6210\u529f"),n.props.onSearch();case 4:case"end":return t.stop()}}),t)}))),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,j.jsx)(p.Z,{"aria-label":"delete",danger:!0,size:"small",style:{marginLeft:5},children:"\u5220\u9664"})})]})}}]}},{key:"getPaginConfig",value:function(){return 0!==this.props.total&&{current:this.props.condition.page,pageSize:this.props.condition.limit,total:this.props.total}}},{key:"handleChange",value:function(n,e){this.props.onChange(n.current,n.pageSize)}},{key:"render",value:function(){return(0,j.jsx)(s.Z,{rowKey:"_id",dataSource:this.props.data,columns:this.getCloums(),pagination:this.getPaginConfig(),onChange:this.handleChange.bind(this),loading:this.props.isLoading})}}]),t}(x.Component),S=(Z=w,function(n){return(0,j.jsx)(Z,(0,a.Z)((0,a.Z)({},n),{},{navigate:(0,v.s0)()}))}),b=t(8687),I=t(7754);var L=(0,b.$j)((function(n){return n.movie}),(function(n){return{onLoad:function(){n((0,I.vw)({page:1,limit:10,key:""}))},onSwitchChange:function(e,t,i){n((0,I.eD)({type:e,newVal:t,id:i}))},onDelete:function(e){return(0,o.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n((0,I.LM)(e));case 2:case"end":return t.stop()}}),t)})))()},onChange:function(e,t){n((0,I.vw)({page:e,limit:t}))},onKeyChange:function(e){n((0,I._n)({key:e}))},onSearch:function(){n((0,I.vw)({page:1}))}}}))(S)}}]);
//# sourceMappingURL=313.a91d0c2c.chunk.js.map